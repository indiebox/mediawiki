developer=http://wikimediafoundation.org/
url=${developer}
maintainer=http://indiecomputing.com/
pkgname=$(basename $(pwd))
_pkgver=REL1_29-1e04d8c
pkgver=${_pkgver/-/_}
pkgrel=1
pkgdesc="Requires submission and approval of accounts"
arch=('any')
license=("GPL")
source=("https://extdist.wmflabs.org/dist/extensions/ConfirmAccount-${_pkgver}.tar.gz")
depends=(
    'mediawiki'
)
options=('!strip')
sha512sums=('SKIP')
# produces a different checksum every time it is downloaded

package() {
# Manifest
    mkdir -p $pkgdir/var/lib/ubos/manifests
    install -m0644 $startdir/ubos-manifest.json $pkgdir/var/lib/ubos/manifests/${pkgname}.json

# Icons
    # mkdir -p $pkgdir/srv/http/_appicons/$pkgname
    # install -m644 $startdir/appicons/{72x72,144x144}.png $pkgdir/srv/http/_appicons/$pkgname/

# Templates
    mkdir -p $pkgdir/usr/share/${pkgname}/tmpl
    install -m644 $startdir/tmpl/ConfirmAccount.php.tmpl $pkgdir/usr/share/${pkgname}/tmpl/

# Source
    rsync --quiet --archive --exclude '.git*' $startdir/src/ConfirmAccount $pkgdir/usr/share/${pkgname}/
}
